(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),o=a.n(r),s=a(11),c=a(1),i=a(8),u=a(4),m=a(3),g=Object(n.forwardRef)((function(e,t){if(e.tasks.length<1)return l.a.createElement("h2",{className:"catch"},"No tasks in database");var a={height:35*e.tasks.length+35+"px"};return console.log(a),l.a.createElement("div",{className:"table-box",ref:t},l.a.createElement("table",{className:"task-table-container"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Task"),l.a.createElement("th",null,"Category"),l.a.createElement("th",null,"Client"),l.a.createElement("th",null,"Duration")),e.tasks.slice(0).reverse().map((function(e){var t="0".concat(e.duration.hours).slice(-2),a="0".concat(e.duration.minutes).slice(-2),n="0".concat(e.duration.seconds).slice(-2);return l.a.createElement("tr",null,l.a.createElement("td",null,e.taskTitle),l.a.createElement("td",null,e.taskCategory),l.a.createElement("td",null,e.clientName),l.a.createElement("td",null,t,":",a,":",n))})))))}));var h=function(e){return l.a.createElement("input",{onChange:function(t){console.log("handleInput");var a=t.target.value,n=t.target.name;e.onChange&&e.onChange(n,a)},name:e.name,placeholder:e.placeholder,value:e.value,autoComplete:"off"})};var d=function(e){var t=e.timer;return l.a.createElement("div",{className:"digits-container"},l.a.createElement("div",{className:"digits"},("0"+t.hours.toString()).slice(-2),":",("0"+t.minutes.toString()).slice(-2),":",("0"+t.seconds.toString()).slice(-2)))};var p=function(e){var t=e.onStart,a=e.onDone,n=e.onDiscard,r=e.startText,o=e.onStartDisabled,s=e.onDoneDisabled;return l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{className:"control-btn start-button",disabled:o,onClick:t},r),l.a.createElement("button",{className:"control-btn done-button",disabled:s,onClick:a},"Done"),l.a.createElement("button",{onClick:n,className:"control-btn reset-button"},"Discard"))},f="PENDING",E="STARTED",b="PAUSED",v={PENDING:"Start",STARTED:"Pause",PAUSED:"Resume"};var y=function(){var e=JSON.parse(localStorage.getItem("loggedinUser")),t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(f),y=Object(m.a)(s,2),S=y[0],O=y[1],j=Object(n.useRef)(null),N=Object(n.useState)({hours:0,minutes:0,seconds:0}),C=Object(m.a)(N,2),w=C[0],k=C[1],T=Object(n.useState)(null),D=Object(m.a)(T,2),I=D[0],P=D[1],x=Object(n.useState)("Start"),L=Object(m.a)(x,2),R=(L[0],L[1]),J=Object(n.useState)({task:"",category:"",client:""}),A=Object(m.a)(J,2),F=A[0],M=A[1],U=Object(n.useState)({category:"",client:""}),W=Object(m.a)(U,2),B=W[0],G=W[1],H=Object(n.useState)([]),q=Object(m.a)(H,2),z=q[0],K=q[1],Q=Object(n.useState)({hours:0,minutes:0,seconds:0}),V=Object(m.a)(Q,2),X=V[0],Y=V[1],Z=Object(n.useState)({showMessage:!1,messageSuccess:!1}),$=Object(m.a)(Z,2),_=($[0],$[1]);function ee(e,t){console.log("handleInput2",e,t),M((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(i.a)({},e,t))}))}function te(e){var t=e.target.value,a=e.target.name;G((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},a,t))}))}function ae(){fetch("http://localhost:5000/tasks/"+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientFilter:B.client,categoryFilter:B.category})}).then((function(e){return e.json()})).then((function(e){var t=0,a=0,n=0;e.forEach((function(e){t+=e.duration.hours,a+=e.duration.minutes,n+=e.duration.seconds}));var l=(a=Math.floor(a+n/60),n%=60,{hours:t=Math.floor(t+a/60),minutes:a%=60,seconds:n});console.log("td",l),Y(l),console.log(X),console.log("tableRef.current",j.current),e.length>=z.length?(K(e),j.current&&(j.current.style.height=35*e.length+35+"px")):(j.current&&(j.current.style.height=35*e.length+35+"px"),setTimeout((function(){return K(e)}),500))}))}function ne(){fetch("http://localhost:5000/users/getfname/"+e).then((function(e){return e.json()})).then((function(e){o(e)}))}if(Object(n.useEffect)((function(){console.log("AAAA",j),ae(),ne()}),[B]),!e)return l.a.createElement(c.a,{to:"/login"});var le=!F.task||!F.category||!F.client||0===w.seconds&&0===w.minutes&&0===w.hours,re=!F.task||!F.category||!F.client;return console.log(S),l.a.createElement("div",null,console.log(z),l.a.createElement("header",{className:"watch-header"},l.a.createElement("h1",{className:"welcome"},"Hi ",r&&r.fname,", get That work done!"),l.a.createElement("p",{className:"instructions"},'Enter a new task and hit that "Start" button, you can always pause and resume, and when your finished with your task hit "Done".')),l.a.createElement(d,{timer:w}),l.a.createElement(p,{onStart:function(){if(_({showMessage:!1,messageSuccess:!1}),I)clearInterval(I),R("Resume"),O(b),P(null);else{O(E),R("Pause");var e=setInterval((function(){k((function(e){var t=e.minutes,a=e.seconds,n=e.hours;return 59===a?(a=0,t++):a++,59===t&&(t=0,n++),{seconds:a,minutes:t,hours:n}}))}),1);P(e)}},onDone:function(){clearInterval(I),P(null),R("Start"),O(f),fetch("http://localhost:5000/tasks/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e,taskTitle:F.task,taskCategory:F.category,clientName:F.client,duration:{seconds:w.seconds,minutes:w.minutes,hours:w.hours}})}).then((function(e){return console.log("res",e),e.json()})).then((function(e){console.log(e),_({showMessage:!0,messageSuccess:e.success}),M({task:"",category:"",client:""}),k({hours:0,minutes:0,seconds:0})})).then(ae).then(ne),fetch("http://localhost:5000/users/updateuser",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:F.category,client:F.client,userEmail:e})}).then((function(e){return console.log("res",e),e.json()})).then((function(e){console.log(e)}))},onDiscard:function(){clearInterval(I),P(null),R("Start"),O(f),k({hours:0,minutes:0,seconds:0}),M({task:"",category:"",client:""})},startText:v[S],onStartDisabled:re,onDoneDisabled:le}),l.a.createElement("div",{className:"inputs-container"},l.a.createElement(h,{onChange:ee,name:"task",placeholder:"Enter task",value:F.task}),l.a.createElement(h,{onChange:ee,type:"text",name:"category",list:"categoryList",placeholder:"Category",value:F.category,autoComplete:"off"}),l.a.createElement("datalist",{id:"categoryList"},r&&r.userCategories.map((function(e){return l.a.createElement("option",null,e)}))),l.a.createElement("input",{onChange:function(e){var t=e.target.value,a=e.target.name;M((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},a,t))}))},name:"client",list:"clientList",placeholder:"Enter Client",value:F.client,autoComplete:"off"}),l.a.createElement("datalist",{id:"clientList"},r&&r.userClients.map((function(e){return l.a.createElement("option",null,e)})))),l.a.createElement("h2",null,"Search By"),l.a.createElement("div",{className:"filterContainer"},l.a.createElement("input",{onChange:te,type:"text",name:"category",list:"categoryList",placeholder:"Category",value:B.category,autoComplete:"off"}),l.a.createElement("datalist",{id:"categoryList"},r&&r.userCategories.map((function(e){return l.a.createElement("option",null,e)}))),l.a.createElement("input",{onChange:te,name:"client",list:"clientList",placeholder:"Client",value:B.client,autoComplete:"off"}),l.a.createElement("datalist",{id:"clientList"},r&&r.userClients.map((function(e){return l.a.createElement("option",null,e)})))),l.a.createElement(g,{tasks:z,ref:j}),l.a.createElement("h3",null,"Total task duration ",("0"+X.hours.toString()).slice(-2),":",("0"+X.minutes.toString()).slice(-2),":",("0"+X.seconds.toString()).slice(-2)))};var S=function(e){console.log("login props",e);var t=Object(n.useState)({email:"",password:""}),a=Object(m.a)(t,2),r=a[0],o=a[1];function s(e){var t=e.target,a=t.name,n=t.value;o(Object(u.a)(Object(u.a)({},r),{},Object(i.a)({},a,n)))}return console.log("form",r),l.a.createElement("div",null,l.a.createElement("header",{className:"log-header"},l.a.createElement("h1",{className:"welcome"},"Welcome To StopWatch"),l.a.createElement("h2",{className:"catch"},"Time Mangement for the professional freelancer")),l.a.createElement("div",{className:"login-container"},l.a.createElement("h2",{className:"please"},"Please Sign In"),l.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=t.target.email.value,n=t.target.password.value;fetch("http://localhost:5000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})}).then((function(e){return console.log("res",e),e.json()})).then((function(t){"Success"===t.message?(localStorage.setItem("loggedinUser",JSON.stringify(a)),e.history.push("/")):e.history.push("/register"),console.log(t)}))}},l.a.createElement("label",{For:"loginemail"},"Email"),l.a.createElement("input",{className:"user-login",id:"loginemail",value:r.email,name:"email",onChange:s})," ",l.a.createElement("br",null),l.a.createElement("label",{For:"loginpassword"},"Password"),l.a.createElement("input",{className:"user-login",id:"loginpassword",type:"password",name:"password",value:r.password,onChange:s})," ",l.a.createElement("br",null),l.a.createElement("button",{className:"control-btn start-button login-btn",type:"sumbit"},"Log in"),l.a.createElement("br",null),l.a.createElement("p",null,"Or"),l.a.createElement("a",{href:"http://localhost:3000/register"},"Register as a new user"))))};var O=function(e){console.log("Register props",e);var t=Object(n.useState)({fname:"",lname:"",email:"",password:""}),a=Object(m.a)(t,2),r=a[0],o=a[1];function s(e){var t=e.target,a=t.name,n=t.value;o(Object(u.a)(Object(u.a)({},r),{},Object(i.a)({},a,n)))}return console.log("form",r),l.a.createElement("div",null,l.a.createElement("header",{className:"log-header"},l.a.createElement("h1",{className:"welcome"},"Welcome To StopWatch"),l.a.createElement("h2",{className:"catch"},"Time Mangement for the professional freelancer")),l.a.createElement("div",{className:"login-container"},l.a.createElement("h2",{className:"please"},"Register below"),l.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=t.target.fname.value,n=t.target.lname.value,l=t.target.email.value,r=t.target.password.value;fetch("http://localhost:5000/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fname:a,lname:n,email:l,password:r})}).then((function(e){return console.log("res",e),e.json()})).then((function(t){"Success"===t.message?(localStorage.setItem("loggedinUser",JSON.stringify(l)),e.history.push("/")):alert(t.message),console.log(t)}))}},l.a.createElement("label",{For:"loginfnane"},"First Name"),l.a.createElement("input",{className:"user-login",id:"fname",value:r.fname,name:"fname",onChange:s})," ",l.a.createElement("br",null),l.a.createElement("label",{For:"loginlnane"},"Last Name"),l.a.createElement("input",{className:"user-login",id:"lname",value:r.lname,name:"lname",onChange:s})," ",l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{For:"loginemail"},"Email"),l.a.createElement("input",{className:"user-login",id:"loginemail",value:r.email,name:"email",onChange:s})," ",l.a.createElement("br",null),l.a.createElement("label",{For:"loginpassword"},"Password"),l.a.createElement("input",{className:"user-login",id:"loginpassword",type:"password",name:"password",value:r.password,onChange:s})," ",l.a.createElement("br",null),l.a.createElement("button",{className:"control-btn start-button login-btn",type:"sumbit"},"Register"),l.a.createElement("br",null),l.a.createElement("p",null,"Or"),l.a.createElement("a",{href:"http://localhost:3000/register"},"Log In as existing user"))))};var j=function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(c.b,{exact:!0,path:"/",component:y}),l.a.createElement(c.b,{exact:!0,path:"/login",component:S}),l.a.createElement(c.b,{exact:!0,path:"/register",component:O})))};a(29);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,null,l.a.createElement(j,null))),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.8edc3071.chunk.js.map